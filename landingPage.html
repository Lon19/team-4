<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="values.css">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head
<body>

<div class="card">
    <img src="autistica.jpg" alt="Autistica logo" style="float:right" width="250" max-width=100% height=auto>
    <h2>November 1, 2019</h2>
    <button class="button3" onclick="window.location.href = 'front_page_adjusted.html';">&#8592;</button>
</div>]

<div class='column1'>
<div class="tab">
    <button class="tablinks" onclick="openGraph(event, 'MentalHealth')">Mental Health</button>
    <button class="tablinks" onclick="openGraph(event, 'Confidence')">Work Self Confidence</button>
    <button class="tablinks" onclick="openGraph(event, 'Culture')">Organisational Culture</button>
</div>

<div id="MentalHealth" class="tabcontent" style="display: block">
    <div class='card'>
        <h3>Mental Health</h3>
        <canvas id = 'MentalHealthChart'></canvas>
       <input type="range" min="1" max="25" value="25" class="slider" id="MentalHealthSlider">
        <canvas id = 'MentalHealthLineChart'></canvas>
    </div>
</div>

<div id="Confidence" class="tabcontent">
  <div class='card'>
    <h3>Work Self Confidence</h3>
    <canvas id = 'ConfidenceChart'></canvas>
    <input type="range" min="1" max="25" value="25" class="slider" id="ConfidenceSlider">
    <canvas id = 'ConfidenceLineChart'></canvas>
  </div>
</div>

<div id="Culture" class="tabcontent">
  <div class='card'>
    <h3>Organisational Culture</h3>
    <canvas id = 'CultureChart'></canvas>
    <input type="range" min="1" max="25" value="25" class="slider" id="CultureSlider">
    <canvas id = 'CultureLineChart'></canvas>
  </div>
</div>

</div>

<div class='column2'>
  <div class='card'>
    <h3>Adjustment</h3>
    <p id="adjustment">fs</p>
  </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
<script>
    function openGraph(evt, graphName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(graphName).style.display = "block";
        evt.currentTarget.className += " active";
    }

    function getDate(){
    }
</script>

<script>
var userMentalH;
var userOrganisationalCulture;
var userSelfConfidence;
var userAdjustment;

function getMentalHealthData(x){

  d3.csv("Mental-health-Table1.csv", function(d){
        if("22222222" == d.Username){
            return{
                date : d.Date,
                depression : +d.Depression,
                anxiety : +d.Anxiety,
                stress : +d.Stress
            };

        }


   }).then(function(data) {
       MentalHealthDataSet.datasets[0].data = [data[x].depression, data[x].anxiety, data[x].stress];

       MentalHealthRadarChart.update();
      // do something
   });
}

function getOrganisationalCulture(x){

    d3.csv("Organisational-culture-Table1.csv", function(d){

    return{
        date : d.Date,
        average : +d.Average
    };

    }).then(function(data){
        // do something here
        CultureDataSet.datasets[0].data = [data[x].average];
        CultureBarChart.update();
    });
}

  function getSelfConfidence(x){
      d3.csv("How_rate_your_confidence-Table1.csv", function(d){

      return{
          date : d.Date,
          learning : +d.Learning,
          problemSolving : +d.Problemsolving,
          pressure : +d.Pressure,
          roleExpectation : +d.Roleexpectations,
          teamwork : +d.Teamwork,
          sensitivity : +d.Sensitivity,
          workPolitics : +d.Workpolitics

      };

      }).then(function(data){
          ConfidenceDataSet.datasets[0].data = [data[x].learning, data[x].problemSolving, data[x].pressure, data[x].roleExpectation, data[x].teamwork, data[x].sensitivity, data[x].workPolitics];
          ConfidenceRadarChart.update();
      // do something here
      });

  }

  function getAdjustment(){
      d3.csv("Autistica-8211-Adjustments.csv", function(d){

      return{
          data : d.Date,
          q1 : d.Q1,
          q2 : d.Q2,
          q3 : d.Q3,
          q4 : d.Q4,
          q5 : d.Q5
      };

      }).then(function(data){
          // do something here

        document.getElementById("adjustment").innerHTML = "dsadsdsa";

      });


  }
    document.getElementById("adjustment").innerHTML = "dsadsdsa";


var MentalHealthChartVar = document.getElementById('MentalHealthChart');
var ConfidenceChartVar = document.getElementById('ConfidenceChart');
var CultureChartVar = document.getElementById('CultureChart');

var MentalHealthctx = document.getElementById("MentalHealthLineChart").getContext('2d');
var Confidencectx = document.getElementById("ConfidenceLineChart").getContext('2d');
var Culturectx = document.getElementById("CultureLineChart").getContext('2d');


var MentalHealthLineChart = new Chart(MentalHealthctx, {
    type: 'line',
    data: {
        labels: ["January",	"February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        datasets: [{
            label: 'Series 1', // Name the series
            data: [3, 4, 2,	5, 9, 1, 2, 6, 2.5, 3, 7, 6], // Specify the data values array
            fill: false,
            borderColor: '#2196f3', // Add custom color border (Line)
            backgroundColor: '#2196f3', // Add custom color background (Points and Fill)
            borderWidth: 1 // Specify bar border width
        }]},
    options: {
      responsive: true, // Instruct chart js to respond nicely.
      maintainAspectRatio: true, // Add to prevent default behaviour of full-width/height
    }
});

var ConfidenceLineChart = new Chart(Confidencectx, {
    type: 'line',
    data: {
        labels: ["January",	"February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        datasets: [{
            label: 'Series 1', // Name the series
            data: [3, 4, 2,	5, 9, 1, 2, 6, 2.5, 3, 7, 6], // Specify the data values array
            fill: false,
            borderColor: '#2196f3', // Add custom color border (Line)
            backgroundColor: '#2196f3', // Add custom color background (Points and Fill)
            borderWidth: 1 // Specify bar border width
        }]},
    options: {
      responsive: true, // Instruct chart js to respond nicely.
      maintainAspectRatio: true, // Add to prevent default behaviour of full-width/height
    }
});

var CultureLineChart = new Chart(Culturectx, {
    type: 'line',
    data: {
        labels: ["January",	"February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        datasets: [{
            label: 'Series 1', // Name the series
            data: [3, 4, 2,	5, 9, 1, 2, 6, 2.5, 3, 7, 6], // Specify the data values array
            fill: false,
            borderColor: '#2196f3', // Add custom color border (Line)
            backgroundColor: '#2196f3', // Add custom color background (Points and Fill)
            borderWidth: 1 // Specify bar border width
        }]},
    options: {
      responsive: true, // Instruct chart js to respond nicely.
      maintainAspectRatio: true, // Add to prevent default behaviour of full-width/height
    }
});

    options = {
        scale: {
            angleLines: {
                display: false
            },
            ticks: {
                suggestedMin: 0,
                suggestedMax: 10
            }
        }
    };

    baroptions = {
        scales: {
            xAxes: [{
                gridLines: {
                    offsetGridLines: true
                }
            }]
        }
    };

    var MentalHealthDataSet = {
        labels: ["Depression", "Anxiety", "Stress"],
        datasets: [{
            label: "entry",
            backgroundColor: "rgba(178, 76, 90, 0.1)",
            borderColor: "rgba(178, 76, 90, 1)",
            data: []
        }]
    };

    getMentalHealthData(24);

    var ConfidenceDataSet = {
        labels: ["Learning", "Problem Solving", "Pressure", "Role Expectations", "Teamwork", "Sensitivity", "Work Politics"],
        datasets: [{
            label: "entry",
            backgroundColor: "rgba(157, 213, 203, 0.1)",
            borderColor: "rgba(157, 213, 203, 1)",
            data: []
        }]
    };

    getSelfConfidence(24);

    var CultureDataSet = {
            datasets: [{
                barPercentage: 0.5,
                barThickness: 6,
                maxBarThickness: 8,
                minBarLength: 2,
                data: []
            }]
    };

    getOrganisationalCulture(24);

    var ConfidenceRadarChart = new Chart(ConfidenceChartVar, {
        type: 'radar',
        data: ConfidenceDataSet,
        options: options
    });

    var MentalHealthRadarChart = new Chart(MentalHealthChartVar, {
        type: 'radar',
        data: MentalHealthDataSet,
        options: options
    });

    var CultureBarChart = new Chart(CultureChartVar, {
        type: 'bar',
        data: CultureDataSet,
        options: baroptions
    })

    getOrganisationalCulture(24);

    var slider = document.getElementById('MentalHealthSlider');

    slider.oninput=function() {
        getMentalHealthData(slider.value-1);
    }

    var slider2 = document.getElementById('ConfidenceSlider');
    slider2.oninput=function() {
        getSelfConfidence(slider2.value-1);
    }

    var slider3 = document.getElementById('CultureSlider');
    slider3.oninput=function() {
        getOrganisationalCulture(slider3.value-1);
    }
</script>

</body>
</html>
